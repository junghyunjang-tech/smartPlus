<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그인 | Sample App</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <div class="login-container">
        <div class="login-card">
            <div class="login-header">
                <img th:src="@{/images/smartplus_logo_wide_v4.png}" alt="smartPlus Logo" style="width: 280px; height: 80px; object-fit: cover; object-position: center; margin-bottom: 2rem; display: block; margin-left: auto; margin-right: auto;">
                <h1>Smart Work, Plus Life.</h1>
                <p>서비스 이용을 위해 로그인해주세요.</p>
            </div>
            <form th:action="@{/login}" method="post" class="login-form">
                <div th:if="${param.error}" class="alert alert-error">
                    아이디 또는 비밀번호가 올바르지 않습니다.
                </div>
                <div th:if="${param.logout}" class="alert alert-success">
                    로그아웃 되었습니다.
                </div>
                
                <div class="form-group">
                    <label for="username">아이디</label>
                    <input type="text" id="username" name="username" placeholder="아이디를 입력하세요" required autofocus>
                </div>
                <div class="form-group">
                    <label for="password">비밀번호</label>
                    <input type="password" id="password" name="password" placeholder="비밀번호를 입력하세요" required>
                </div>
                <button type="submit" class="btn-primary">로그인</button>
            </form>
            <div class="login-footer">
                <p>계정이 없으신가요? <a th:href="@{/signup}">회원가입</a></p>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script th:src="@{/js/zinidata/zinidata-toast.js}"></script>
    <script th:inline="javascript">
        /*<![CDATA[*/
        $(document).ready(function() {
            console.log("Login page loaded");
            var successMessage = /*[[${successMessage}]]*/ null;
            console.log("Success message:", successMessage);
            
            if (successMessage) {
                console.log("Success message exists, showing toast");
                // 약간의 지연을 주어 toast 모듈이 완전히 로드되도록 함
                setTimeout(function() {
                    if (typeof Zinidata !== 'undefined' && Zinidata.toast) {
                        console.log("Calling Zinidata.toast.success");
                        Zinidata.toast.success(successMessage);
                    } else {
                        console.error("Zinidata or Zinidata.toast is undefined");
                    }
                }, 100);
            } else {
                console.log("No success message");
            }
        });
        /*]]>*/
    </script>
</body>
</html>
